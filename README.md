# RenPy Translation Updater

## Описание

Этот скрипт предназначен для автоматического обновления переводов в файлах RenPy (.rpy) с сохранением структуры блоков и использованием кеширования переводов. Основные возможности:

- Автоматический перевод отсутствующих строк с помощью Yandex Translate API
- Сохранение уже существующих переводов из старой версии
- Кеширование переводов для экономии запросов к API
- Поддержка разных типов блоков перевода в RenPy
- Многопоточная обработка файлов

## Требования

- Python 3.7+
- Установленные зависимости: `yandexfreetranslate`, `tqdm`

Установите зависимости командой:
```bash
pip install yandexfreetranslate tqdm
```

## Подготовка

1. **Базовый перевод**: Перед использованием скрипта необходимо создать базовый перевод через RenPy (используя команду `Generate Translations` в RenPy Launcher). Это создаст файлы с оригинальными строками и пустыми переводами.

2. **Старый перевод** (опционально): Если у вас есть старая версия перевода, скрипт может перенести из нее существующие переводы, а новые строки переведет автоматически.

## Использование

Запустите скрипт и укажите:
1. Папку со старым переводом (если есть)
2. Папку с базовым переводом (созданным RenPy)
3. Папку для сохранения результата
4. Исходный язык (например, 'en')
5. Целевой язык (например, 'ru')

Пример:
```bash
python translate.py
```

## Особенности работы

1. **Специальные символы**: Строки, содержащие специальные символы (`[{}/\<>@#$%^&*_=+\\|~`]), не переводятся автоматически. Их нужно переводить вручную после работы скрипта.

2. **Кеширование**: Все переводы сохраняются в файле `translation_cache.jsonl`, что позволяет избежать повторных запросов для одинаковых строк.

3. **Многопоточность**: Скрипт обрабатывает файлы параллельно, что ускоряет работу с большими проектами.

## Рекомендации

1. Перед использованием сделайте резервную копию ваших файлов.
2. Проверьте результат, особенно строки со специальными символами.
3. Для больших проектов может потребоваться несколько запусков из-за ограничений API переводчика.

## Ограничения

- Скрипт не обрабатывает динамические строки и сложные конструкции с переменными.
- Качество автоматического перевода зависит от Yandex Translate API.
- Для коммерческих проектов убедитесь, что использование бесплатного API соответствует условиям сервиса.
